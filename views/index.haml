%head
  %link{ :rel => "stylesheet", :type => "text/css", :href => "style.css"}
  %script{ :type => "text/javascript", :src => "jquery-1.7.2.min.js"}
  %script{ :type => "text/javascript", :src => "jquery.uploadProgress.js"}

%body
  %h1 Sinatra file upload progress demo:
  %form#upload{ :enctype => "multipart/form-data", :action => "/upload", :method => "post"}
    %input{ :name=> "file", :type => "file"}
    %input{ :type=> "submit", :value => "Upload"}

  #uploading
    #progress.bar
      #progressbar
        #percents 0%

  :javascript
    $(function() {
      $('form').uploadProgress({
        /* scripts locations for safari */
        jqueryPath: "jquery-1.7.2.min.js",
        uploadProgressPath: "jquery.uploadProgress.js",

        /* function called each time bar is updated */
        uploading: function(upload) {$('#percents').html(upload.percents+'%');},

        /* selector or element that will be updated */
        progressBar: "#progressbar",

        /* progress reports url */
        progressUrl: "/progress",

        /* how often will bar be updated */
        interval: 500
      });
    });
